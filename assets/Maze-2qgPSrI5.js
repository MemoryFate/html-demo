import{_ as S,g as X,r as Y,f as K,c as u,h as y,i as W,F as I,a as B,n as P,o as h}from"./index-BeDeU1Lp.js";const F={class:"content",id:"maze_area"},N={style:{"z-index":"1",position:"inherit"}},D=["id","onClick"],c=20,V={__name:"Maze",setup(H){class l{constructor(t=0,r=0){this._x=t,this._y=r}get x(){return parseInt(this._x)}set x(t){this._x=parseInt(t)}get y(){return parseInt(this._y)}set y(t){this._y=parseInt(t)}}const{proxy:E,emit:j}=X(),n=Y({rectList:[],rows:0,cols:0,startPoint:new l,endPoint:void 0});K(()=>{A(),E.$nextTick(()=>{M()})}),document.addEventListener("keydown",e=>{let t,r;const o=document.getElementById(`rect_${n.startPoint.x}_${n.startPoint.y}`);if(e.code=="KeyW"){if(t=n.startPoint.x,r=n.startPoint.y-1>0?n.startPoint.y-1:0,o.style.borderTop!="none")return}else if(e.code=="KeyA"){if(t=n.startPoint.x-1>0?n.startPoint.x-1:0,r=n.startPoint.y,o.style.borderLeft!="none")return}else if(e.code=="KeyS"){if(t=n.startPoint.x,r=n.startPoint.y+1>n.rows-1?n.rows-1:n.startPoint.y+1,o.style.borderBottom!="none")return}else if(e.code=="KeyD"){if(t=n.startPoint.x+1>n.cols-1?n.cols-1:n.startPoint.x+1,r=n.startPoint.y,o.style.borderRight!="none")return}else return;n.startPoint=new l(t,r)});function A(){n.rows=document.getElementById("canvas").clientHeight/c,n.cols=document.getElementById("canvas").clientWidth/c;for(let t=0;t<n.rows;t++){var e=[];for(let r=0;r<n.cols;r++)e.push(`rect_${r}_${t}`);n.rectList.push(e)}}function M(){let e=[];for(n.startPoint=new l(Math.floor(Math.random()*n.cols),Math.floor(Math.random()*n.rows)),document.getElementById(`rect_${n.startPoint.x}_${n.startPoint.y}`).setAttribute("hasPoint","yes!"),e=e.concat(f(n.startPoint));e.length;){const t=Math.floor(Math.random()*e.length),o=e[t].split("_"),s=new l(parseInt(o[0]),parseInt(o[1])),d=document.getElementById(`rect_${s.x}_${s.y}`);if(o[2]=="top"){let i=new l(s.x,s.y-1);if(i.y>=0){const a=document.getElementById(`rect_${i.x}_${i.y}`);a.getAttribute("hasPoint")||(a.setAttribute("hasPoint","yes!"),d.style.borderTop="none",a.style.borderBottom="none",e=e.concat(f(i,"bottom")))}}if(o[2]=="left"){let i=new l(s.x-1,s.y);if(i.x>=0){const a=document.getElementById(`rect_${i.x}_${i.y}`);a.getAttribute("hasPoint")||(a.setAttribute("hasPoint","yes!"),d.style.borderLeft="none",a.style.borderRight="none",e=e.concat(f(i,"right")))}}if(o[2]=="right"){let i=new l(s.x+1,s.y);if(i.x<=n.cols-1){const a=document.getElementById(`rect_${i.x}_${i.y}`);a.getAttribute("hasPoint")||(a.setAttribute("hasPoint","yes!"),d.style.borderRight="none",a.style.borderLeft="none",e=e.concat(f(i,"left")))}}if(o[2]=="bottom"){let i=new l(s.x,s.y+1);if(i.y<=n.rows-1){const a=document.getElementById(`rect_${i.x}_${i.y}`);a.getAttribute("hasPoint")||(a.setAttribute("hasPoint","yes!"),d.style.borderBottom="none",a.style.borderTop="none",e=e.concat(f(i,"top")))}}e.splice(t,1)}}function f(e,t=""){let r=[];return e.x!=0&&t!="left"&&r.push(`${e.x}_${e.y}_left`),e.x!=n.cols-1&&t!="right"&&r.push(`${e.x}_${e.y}_right`),e.y!=0&&t!="top"&&r.push(`${e.x}_${e.y}_top`),e.x!=n.rows-1&&t!="bottom"&&r.push(`${e.x}_${e.y}_bottom`),r}function k(e,t){n.endPoint=new l(e,t),R(),C()}function T(e,t){const o=document.getElementById("canvas").getContext("2d"),s=30,d=c/4;o.lineWidth=.5,o.strokeStyle="#ddd";var i=e.x*c+c/2,a=e.y*c+c/2,m=t.x*c+c/2,x=t.y*c+c/2,p=Math.atan2(a-x,i-m)*180/Math.PI,b=(p+s)*Math.PI/180,$=(p-s)*Math.PI/180,w=d*Math.cos(b),v=d*Math.sin(b),L=d*Math.cos($),z=d*Math.sin($);o.save(),o.beginPath();var _=i-w,g=a-v;o.moveTo(_,g),o.moveTo(i,a),o.lineTo(m,x),_=m+w,g=x+v,o.moveTo(_,g),o.lineTo(m,x),_=m+L,g=x+z,o.lineTo(_,g),o.stroke(),o.restore()}function R(){const e=document.getElementsByClassName("rect");Array.prototype.forEach.call(e,o=>{o.removeAttribute("hasPoint1")});const t=document.getElementById("canvas");t.getContext("2d").clearRect(0,0,t.width,t.height)}function C(){let e=[n.startPoint],t=e[0];document.getElementById(`rect_${t.x}_${t.y}`).setAttribute("hasPoint1","yes!"),r();function r(){if(t.x!=n.endPoint.x||t.y!=n.endPoint.y){const o=document.getElementById(`rect_${t.x}_${t.y}`);let s;o.style.borderTop=="none"&&!document.getElementById(`rect_${t.x}_${t.y-1}`).getAttribute("hasPoint1")?s=new l(t.x,t.y-1):o.style.borderLeft=="none"&&!document.getElementById(`rect_${t.x-1}_${t.y}`).getAttribute("hasPoint1")?s=new l(t.x-1,t.y):o.style.borderRight=="none"&&!document.getElementById(`rect_${t.x+1}_${t.y}`).getAttribute("hasPoint1")?s=new l(t.x+1,t.y):o.style.borderBottom=="none"&&!document.getElementById(`rect_${t.x}_${t.y+1}`).getAttribute("hasPoint1")&&(s=new l(t.x,t.y+1)),document.getElementById(`rect_${s==null?void 0:s.x}_${s==null?void 0:s.y}`)?(document.getElementById(`rect_${s.x}_${s.y}`).setAttribute("hasPoint1","yes!"),T(t,s),e.push(s),t=s):(e.pop(),t=e[e.length-1]),r()}}}return(e,t)=>(h(),u("div",F,[t[0]||(t[0]=y("canvas",{class:"canvas",id:"canvas",width:"800",height:"800"},null,-1)),y("div",N,[(h(!0),u(I,null,B(n.rectList,(r,o)=>(h(),u("div",{style:{display:"flex","flex-direction":"row","z-index":"1"},key:"row"+o},[(h(!0),u(I,null,B(r,(s,d)=>(h(),u("div",{key:"col"+d},[y("div",{class:"rect",style:P({height:c+"px"}),id:s,onClick:i=>k(d,o)},null,12,D)]))),128))]))),128)),y("div",{class:"dot red",style:P({top:n.startPoint.y*c+"px",left:n.startPoint.x*c+"px",width:c+"px"})},null,4),n.endPoint?(h(),u("div",{key:0,class:"dot blue",style:P({top:n.endPoint.y*c+"px",left:n.endPoint.x*c+"px",width:c+"px"})},null,4)):W("",!0)]),t[1]||(t[1]=y("div",null,[y("input",{type:"radio",value:"1",id:"dfs",name:"radio_group",checked:""}),y("label",{for:"dfs"},"DFS算法"),y("input",{type:"radio",value:"2",id:"astar",name:"radio_group"}),y("label",{for:"a"},"A*算法")],-1))]))}},G=S(V,[["__scopeId","data-v-c11df7b9"]]);export{G as default};
